var nodeglass = require('../nodegrass');
var http = require('http');

	var reqheaders = {
		'Accept':'text/html,application/xhtml+xml,application/xml;;q=0.9;q=0.8',
		'Accept-Encoding':'utf-8',
		'Accept-Language':'zh-cn,zh;q=0.8,en-us;q=0.5,en;q=0.3',
		'Cookie':'SINAGLOBAL=00000050.7098604b.503f77d6.964c22a4; Apache=00000048.e6a97b42.50419fb8.98f1b1b0',
		'Cache-Control':'no-cache',
		'Connection':'keep-alive',
		'Content-Length':605,
		'Host':'login.sina.com.cn',
		'Content-Type':'application/x-www-form-urlencoded',
		//'Pragma':'no-cache',
		'Referer':	'	http://weibo.com/',
		'User-Agent':	'Mozilla/5.0 (Windows NT 6.1; rv:14.0) Gecko/20100101 Firefox/14.0.1',
		//'X-Requested-With':'XMLHttpRequest'
	};
	var post_data = {
        encoding:'UTF-8',
			entry:'weibo',
			from:'',
			gateway:'1',
			nonce:'EKO7A4',
			prelt:'575',
			pwencode:'rsa2',
			returntype:'META',
			rsakv:'1330428213',
			savestate:'0',
			servertime:'1346478118',
			service:'miniblog',
			sp:'240317e58ff554909cc9d379a0c1740858b4060aab86aa9167bdb255e300fc983f0589b4f5d48e0983a93c917b5ab0601afd462d7b515bfacea3acf54f8f3584fa41735b0ec87d843a4dd93707478dddfd4ae35dac0b76d9a3fb3672a662bb87136771a57c1eb3e12dd17d7b56a4d7035ce1f523c8da52c2750fa9cb96ef3730',
			ssosimplelogin:'1',
			su:'NDkyODc4MzY0JTQwcXEuY29t',
			url:'http://weibo.com/ajaxlogin.php?framelogin=1&callback=parent.sinaSSOController.feedBackUrlCallBack',
			useticket:'1',
			vsnf:'1'
		};

	

	var req = nodeglass.post("http://login.sina.com.cn/sso/"+
	"login.php?client=ssologin.js(v1.4.2)",function(data,status,headers){
		console.log(data);
		console.log(headers);
		
	
	},null,post_data);
	req.on('error', function(e) {
	console.log('problem with request: ' + e.message);
	});

/*
http.createServer(function(request,response){
	
	var reqheaders = {
		'Accept':'text/html,application/xhtml+xml,application/xml;;q=0.9;q=0.8',
		'Accept-Encoding':'utf-8',
		'Accept-Language':'zh-cn,zh;q=0.8,en-us;q=0.5,en;q=0.3',
		'Cookie':'SINAGLOBAL=00000050.7098604b.503f77d6.964c22a4; Apache=00000048.e6a97b42.50419fb8.98f1b1b0',
		'Cache-Control':'no-cache',
		'Connection':'keep-alive',
		'Content-Length':605,
		'Host':'login.sina.com.cn',
		'Content-Type':'application/x-www-form-urlencoded',
		//'Pragma':'no-cache',
		'Referer':	'	http://weibo.com/',
		'User-Agent':	'Mozilla/5.0 (Windows NT 6.1; rv:14.0) Gecko/20100101 Firefox/14.0.1',
		//'X-Requested-With':'XMLHttpRequest'
	};
	var post_data = {
        encoding:'UTF-8',
			entry:'weibo',
			from:'',
			gateway:'1',
			nonce:'EKO7A4',
			prelt:'575',
			pwencode:'rsa2',
			returntype:'META',
			rsakv:'1330428213',
			savestate:'0',
			servertime:'1346478118',
			service:'miniblog',
			sp:'240317e58ff554909cc9d379a0c1740858b4060aab86aa9167bdb255e300fc983f0589b4f5d48e0983a93c917b5ab0601afd462d7b515bfacea3acf54f8f3584fa41735b0ec87d843a4dd93707478dddfd4ae35dac0b76d9a3fb3672a662bb87136771a57c1eb3e12dd17d7b56a4d7035ce1f523c8da52c2750fa9cb96ef3730',
			ssosimplelogin:'1',
			su:'NDkyODc4MzY0JTQwcXEuY29t',
			url:'http://weibo.com/ajaxlogin.php?framelogin=1&callback=parent.sinaSSOController.feedBackUrlCallBack',
			useticket:'1',
			vsnf:'1'
		};

	

	var req = nodeglass.post("http://login.sina.com.cn/sso/"+
	"login.php?client=ssologin.js(v1.4.2)",function(data,status,headers){
		response.writeHeader(200,{'Content-Type':'text/plain;charset=utf-8;'});
		//var str = iconv.decode(buffer,'gbk');
		response.write(status+"<br/>");
		response.write(headers+"<br/>");
		response.end(data);
		console.log(data);
		console.log(headers);
		
	
	},reqheaders,post_data);
	req.on('error', function(e) {
	console.log('problem with request: ' + e.message);
	});
}).listen(8088);

*/
